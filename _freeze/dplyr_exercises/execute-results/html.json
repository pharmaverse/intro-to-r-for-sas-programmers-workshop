{
  "hash": "0dcc228239531ffabc938624635e7880",
  "result": {
    "markdown": "---\ntitle: \"dplyr exercises\"\nauthor: \"Stefan\"\nformat: html\neditor: visual\n---\n\n\n\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"tidyverse\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0      ✔ purrr   1.0.1 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.5.0 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\n# load data\nadsl <- haven::read_sas(\"data/adsl.sas7bdat\") %>% \n  mutate_if(is_character, na_if, \"\")\n```\n:::\n\n\n## Data wrangling with dplyr\n\nLoad the `adsl` data-frame and select the following variables:\n\n-   USUBJID\n\n-   ARM\n\n-   SEX\n\n-   AGE\n\n-   AGEU\n\n-   AGEGR1\n\n-   COUNTRY\n\n-   EOSSTT\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show solution\"}\nadsl %>% \n  select(USUBJID, ARM, SEX, starts_with(\"AGE\"), COUNTRY, EOSSTT)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 306 × 8\n   USUBJID     ARM                  SEX     AGE AGEU  AGEGR1 COUNTRY EOSSTT     \n   <chr>       <chr>                <chr> <dbl> <chr>  <dbl> <chr>   <chr>      \n 1 01-701-1015 Placebo              F        63 YEARS      2 USA     COMPLETED  \n 2 01-701-1023 Placebo              M        64 YEARS      2 USA     DISCONTINU…\n 3 01-701-1028 Xanomeline High Dose M        71 YEARS      3 USA     COMPLETED  \n 4 01-701-1033 Xanomeline Low Dose  M        74 YEARS      3 USA     DISCONTINU…\n 5 01-701-1034 Xanomeline High Dose F        77 YEARS      3 USA     COMPLETED  \n 6 01-701-1047 Placebo              F        85 YEARS      3 USA     DISCONTINU…\n 7 01-701-1057 Screen Failure       F        59 YEARS      2 USA     <NA>       \n 8 01-701-1097 Xanomeline Low Dose  M        68 YEARS      3 USA     COMPLETED  \n 9 01-701-1111 Xanomeline Low Dose  F        81 YEARS      3 USA     DISCONTINU…\n10 01-701-1115 Xanomeline Low Dose  M        84 YEARS      3 USA     DISCONTINU…\n# … with 296 more rows\n```\n:::\n:::\n\n\nOn the selected variables, include only patients in the placebo arm who are 66, 77, 88, or 99 years old.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show solution\"}\nadsl %>% \n  select(USUBJID, SEX, ARM, EOSSTT, starts_with(\"AGE\")) %>% \n  filter(ARM == \"Placebo\",\n         AGE %in% c(6:9*11))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 7\n  USUBJID     SEX   ARM     EOSSTT         AGE AGEU  AGEGR1\n  <chr>       <chr> <chr>   <chr>        <dbl> <chr>  <dbl>\n1 01-705-1059 F     Placebo DISCONTINUED    66 YEARS      3\n2 01-708-1171 F     Placebo COMPLETED       77 YEARS      3\n3 01-710-1368 F     Placebo COMPLETED       88 YEARS      3\n4 01-714-1035 F     Placebo COMPLETED       88 YEARS      3\n5 01-718-1139 M     Placebo COMPLETED       77 YEARS      3\n```\n:::\n:::\n\n\nFurther include the variable TRTSDTM (datetime of first exposure to treatment) and sort the previous data-frame according to this variable from most recent to least recent first exposure.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show solution\"}\nadsl %>% \n  select(USUBJID, SEX, ARM, EOSSTT, starts_with(\"AGE\"), TRTSDTM) %>% \n  filter(ARM == \"Placebo\",\n         AGE %in% c(6:9*11)) %>% \n  arrange(desc(TRTSDTM))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 8\n  USUBJID     SEX   ARM     EOSSTT         AGE AGEU  AGEGR1 TRTSDTM            \n  <chr>       <chr> <chr>   <chr>        <dbl> <chr>  <dbl> <dttm>             \n1 01-714-1035 F     Placebo COMPLETED       88 YEARS      3 2014-04-17 00:00:00\n2 01-710-1368 F     Placebo COMPLETED       88 YEARS      3 2013-10-23 00:00:00\n3 01-705-1059 F     Placebo DISCONTINUED    66 YEARS      3 2013-08-05 00:00:00\n4 01-718-1139 M     Placebo COMPLETED       77 YEARS      3 2013-05-19 00:00:00\n5 01-708-1171 F     Placebo COMPLETED       77 YEARS      3 2012-12-06 00:00:00\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}